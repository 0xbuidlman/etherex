# Package Name:       EtherEx
# Package Author:     caktux
# Package Email:      caktux@etherex.org
# Package Repository: https://github.com/etherex/etherex

# Set some variables.
-
  set:
    zg: "0xe68faeeff09f46b87e83e13cef47275ebaa34349"
    caktux: "0xcf523d526b21aef4284a7f9d91a003646d5c8542"
    mids: "0x2ad9e5d8960882c07b96e2a21d5a39ab082e7368"

# Deploy contracts
-
  deploy:
    EtherEx:
      contract: etherex.se
      gas: 2500000
      wait: True
      # endowment: 1000000000000000000
-
  deploy:
    ETX:
      contract: etx.se
      gas: 1000000
      wait: True
-
  deploy:
    CAK:
      contract: etx.se
      gas: 1000000
      wait: True
-
  deploy:
    MID:
      contract: etx.se
      gas: 1000000
      wait: True

# Register subcurrencies on the exchange
-
  transact:
    RegisterETX:
      to: $EtherEx
      gas: 1000000
      sig: add_market:[int256,int256,int256,int256,int256,int256]:int256
      data:
        - ETX
        - $ETX
        - 5
        - 100000000
        - 1000000000000000000
        - 1
      wait: True
-
  transact:
    RegisterCAK:
      to: $EtherEx
      gas: 1000000
      sig: add_market:[int256,int256,int256,int256,int256,int256]:int256
      data:
        - CAK
        - $CAK
        - 4
        - 1000
        - 1000000000000000000
        - 1
      wait: True
-
  transact:
    RegisterMID:
      to: $EtherEx
      gas: 1000000
      sig: add_market:[int256,int256,int256,int256,int256,int256]:int256
      data:
        - MID
        - $MID
        - 3
        - 10000
        - 1000000000000000000
        - 3
      wait: True


# Set exchange address and market ID in subcurrency contracts
-
  transact:
    SetExchangeETX:
      to: $ETX
      sig: set_exchange:[int256,int256]:int256
      data:
        - $EtherEx
        - 1
-
  transact:
    SetExchangeCAK:
      to: $CAK
      sig: set_exchange:[int256,int256]:int256
      data:
        - $EtherEx
        - 2
-
  transact:
    SetExchangeMID:
      to: $MID
      sig: set_exchange:[int256,int256]:int256
      data:
        - $EtherEx
        - 3
      wait: True


# Change sub-currencies' ownership
-
  transact:
    SetETXOwner:
      to: $ETX
      sig: change_ownership:[int256]:int256
      data:
        - $zg
    SetCAKOwner:
      to: $CAK
      sig: change_ownership:[int256]:int256
      data:
        - $zg
    SetMIDOwner:
      to: $MID
      sig: change_ownership:[int256]:int256
      data:
        - $zg
      wait: True

# Fill up
-
  transact:
    ZG:
      to: $zg
      value: 1000000000000000000000
    CAK:
      to: $caktux
      value: 1000000000000000000000
    MID:
      to: $mids
      value: 1000000000000000000000
      wait: True
-
  transact:
    ZGetx:
      to: $ETX
      sig: transfer:[int256,int256]:int256
      data:
        - $zg
        - 10000000000
    CAKetx:
      to: $ETX
      sig: transfer:[int256,int256]:int256
      data:
        - $caktux
        - 10000000000
    MIDetx:
      to: $ETX
      sig: transfer:[int256,int256]:int256
      data:
        - $mids
        - 10000000000
      wait: True
-
  transact:
    ZGcak:
      to: $CAK
      sig: transfer:[int256,int256]:int256
      data:
        - $zg
        - 5000000000
    CAKcak:
      to: $CAK
      sig: transfer:[int256,int256]:int256
      data:
        - $caktux
        - 50000000000
    MIDcak:
      to: $CAK
      sig: transfer:[int256,int256]:int256
      data:
        - $mids
        - 5000000000
      wait: True
-
  transact:
    ZGetx:
      to: $MID
      sig: transfer:[int256,int256]:int256
      data:
        - $zg
        - 5000000000
    CAKetx:
      to: $MID
      sig: transfer:[int256,int256]:int256
      data:
        - $caktux
        - 5000000000
    MIDetx:
      to: $MID
      sig: transfer:[int256,int256]:int256
      data:
        - $mids
        - 50000000000
      wait: True


# Deposit into exchange
-
  transact:
    deposit:
      to: $ETX
      sig: transfer:[int256,int256]:int256
      gas: 250000
      data:
        - $EtherEx
        - 1000000000
    depositCAK:
      to: $CAK
      sig: transfer:[int256,int256]:int256
      gas: 250000
      data:
        - $EtherEx
        - 10000000000
    depositMID:
      to: $MID
      sig: transfer:[int256,int256]:int256
      gas: 250000
      data:
        - $EtherEx
        - 10000000000
      wait: True

# ETX test trades
-
  transact:
    # Sells
    trade1:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 25000000
        - 1
    trade2:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 15000000
        - 25000000
        - 1
    trade3:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 25000000
        - 25000000
        - 1
    trade4:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 35000000
        - 26000000
        - 1
    trade5:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 45000000
        - 27000000
        - 1
      wait: True
    trade6:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 55000000
        - 28000000
        - 1
    trade7:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 1500000
        - 29000000
        - 1
    trade8:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 25000000
        - 30000000
        - 1
    trade9:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 25000000
        - 31000000
        - 1
    trade10:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 25000000
        - 32000000
        - 1
      wait: True

    # Buys
    trade11:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 24000000
        - 1
      value: 12000000000000000000
    trade12:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 23000000
        - 1
      value: 11500000000000000000
    trade13:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 22000000
        - 1
      value: 11000000000000000000
    trade14:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 21000000
        - 1
      value: 10500000000000000000
      wait: True



# CAK test trades
-
  transact:
    # Sells
    trade1:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 50000000
        - 25
        - 2
    trade2:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 150000000
        - 26
        - 2
    trade3:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 250000000
        - 27
        - 2
    trade4:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 350000000
        - 28
        - 2
    trade5:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 450000000
        - 29
        - 2
    trade6:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 550000000
        - 30
        - 2
      wait: True

    # Buys
    trade11:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 24
        - 2
      value: 12000000000000000000
    trade12:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 23
        - 2
      value: 11500000000000000000
    trade13:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 22
        - 2
      value: 11000000000000000000
    trade14:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 21
        - 2
      value: 10500000000000000000
      wait: True


# MID test trades
-
  transact:
    # Sells
    trade1:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 50000000
        - 25
        - 3
    trade2:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 150000000
        - 26
        - 3
    trade3:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 250000000
        - 27
        - 3
    trade4:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 350000000
        - 28
        - 3
    trade5:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 450000000
        - 29
        - 3
    trade6:
      to: $EtherEx
      sig: sell:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 550000000
        - 30
        - 3
      wait: True

    # Buys
    trade11:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 24
        - 3
      value: 12000000000000000000
    trade12:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 23
        - 3
      value: 11500000000000000000
    trade13:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 22
        - 3
      value: 11000000000000000000
    trade14:
      to: $EtherEx
      sig: buy:[int256,int256,int256]:int256
      gas: 500000
      data:
        - 5000000
        - 21
        - 3
      value: 10500000000000000000
      wait: True
